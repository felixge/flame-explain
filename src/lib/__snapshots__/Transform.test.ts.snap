// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`transformQueries time accounting snapshots are matching CTESimple 1`] = `
".-----------------------------------------------------------------------------------------------.
|                                           CTESimple                                           |
|-----------------------------------------------------------------------------------------------|
| # |        Label        | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|---|---------------------|-------------------|--------------|------------|-----------|---------|
| 1 | Query               |                   |              |   102.2 ms |      0 μs |       x |
| 2 |   Planning          |                   |              |      51 μs |     51 μs |       x |
| 3 |   Execution         |                   |              |   102.2 ms |     19 μs |       x |
| 4 |     CTE Scan on foo |          102.2 ms |            1 |   102.2 ms |      7 μs |         |
| 5 |       CTE foo       |          102.2 ms |            1 |   102.2 ms |      0 μs |       x |
| 6 |         Result      |          102.2 ms |            1 |   102.2 ms |  102.2 ms |         |
'-----------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching CTESleepUnion 1`] = `
".----------------------------------------------------------------------------------------------------------.
|                                              CTESleepUnion                                               |
|----------------------------------------------------------------------------------------------------------|
| #  |             Label             | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|-------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Query                         |                   |              |   303.1 ms |      0 μs |       x |
|  2 |   Planning                    |                   |              |     307 μs |    307 μs |       x |
|  3 |   Execution                   |                   |              |   302.8 ms |    152 μs |       x |
|  4 |     Limit                     |          302.7 ms |            1 |   302.7 ms |      5 μs |         |
|  5 |       CTE foo                 |          302.6 ms |            1 |   302.6 ms |      0 μs |       x |
|  6 |         Append                |          302.6 ms |            1 |   302.6 ms |      4 μs |         |
|  7 |           Result              |          101.1 ms |            1 |   101.1 ms |  101.1 ms |         |
|  8 |           Result              |          201.5 ms |            1 |   201.5 ms |  201.5 ms |         |
|  9 |           Result              |              0 μs |            0 |       0 μs |      0 μs |         |
| 10 |       InitPlan 2 (returns $1) |          101.1 ms |            1 |       7 μs |      0 μs |       x |
| 11 |         CTE Scan on foo foo_1 |          101.1 ms |            1 |       7 μs |      7 μs |         |
| 12 |       Result                  |          302.7 ms |            1 |      60 μs |     47 μs |         |
| 13 |         CTE Scan on foo       |          201.5 ms |            1 |      13 μs |     13 μs |         |
'----------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching NestedLoop 1`] = `
".--------------------------------------------------------------------------------------------------------------------.
|                                                     NestedLoop                                                     |
|--------------------------------------------------------------------------------------------------------------------|
| # |                  Label                   | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|---|------------------------------------------|-------------------|--------------|------------|-----------|---------|
| 1 | Query                                    |                   |              |     154 μs |      0 μs |       x |
| 2 |   Planning                               |                   |              |      67 μs |     67 μs |       x |
| 3 |   Execution                              |                   |              |      87 μs |     28 μs |       x |
| 4 |     Nested Loop                          |             59 μs |            1 |      59 μs |     30 μs |         |
| 5 |       Function Scan on generate_series a |              9 μs |            1 |       9 μs |      9 μs |         |
| 6 |       Function Scan on generate_series b |              2 μs |           10 |      20 μs |     20 μs |         |
'--------------------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching PGIndexes 1`] = `
".----------------------------------------------------------------------------------------------------------------------------------------.
|                                                               PGIndexes                                                                |
|----------------------------------------------------------------------------------------------------------------------------------------|
| #  |                            Label                            | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|-------------------------------------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Query                                                       |                   |              |     9.2 ms |      0 μs |       x |
|  2 |   Planning                                                  |                   |              |     974 μs |    974 μs |       x |
|  3 |   Execution                                                 |                   |              |     8.2 ms |    135 μs |       x |
|  4 |     Nested Loop Left Join                                   |            8.1 ms |            1 |     8.1 ms |    6.9 ms |         |
|  5 |       Hash Left Join                                        |            1.2 ms |            1 |     1.2 ms |    110 μs |         |
|  6 |         Nested Loop                                         |            1.1 ms |            1 |     1.1 ms |     84 μs |         |
|  7 |           Hash Join                                         |            469 μs |            1 |     469 μs |    142 μs |         |
|  8 |             Seq Scan on pg_index x                          |             53 μs |            1 |      53 μs |     53 μs |         |
|  9 |             Hash                                            |            274 μs |            1 |     274 μs |     40 μs |         |
| 10 |               Seq Scan on pg_class c                        |            234 μs |            1 |     234 μs |    234 μs |         |
| 11 |           Index Scan using pg_class_oid_index on pg_class i |              4 μs |          130 |     520 μs |    520 μs |         |
| 12 |         Hash                                                |             16 μs |            1 |      16 μs |      6 μs |         |
| 13 |           Seq Scan on pg_namespace n                        |             10 μs |            1 |      10 μs |     10 μs |         |
| 14 |       Materialize                                           |              0 μs |          130 |       5 μs |      0 μs |         |
| 15 |         Seq Scan on pg_tablespace t                         |              5 μs |            1 |       5 μs |      5 μs |         |
'----------------------------------------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching ParallelAppend 1`] = `
".-------------------------------------------------------------------------------------------------------------------.
|                                                  ParallelAppend                                                   |
|-------------------------------------------------------------------------------------------------------------------|
| #  |                 Label                  | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|----------------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Query                                  |                   |              |   430.4 ms |      0 μs |       x |
|  2 |   Planning                             |                   |              |     149 μs |    149 μs |       x |
|  3 |   Execution                            |                   |              |   430.2 ms |    115 μs |       x |
|  4 |     Gather                             |          430.1 ms |            1 |   430.1 ms |   80.8 ms |         |
|  5 |       Parallel Append                  |          349.3 ms |            3 |   349.3 ms |  128.0 ms |         |
|  6 |         Aggregate                      |          221.2 ms |            1 |   221.2 ms |   96.0 ms |         |
|  7 |           Seq Scan on public.foo       |          125.2 ms |            1 |   125.2 ms |  125.2 ms |         |
|  8 |         Aggregate                      |          220.1 ms |            1 |   220.1 ms |   94.2 ms |         |
|  9 |           Seq Scan on public.foo foo_1 |          125.9 ms |            1 |   125.9 ms |  125.9 ms |         |
| 10 |         Aggregate                      |          200.4 ms |            1 |   200.4 ms |   92.6 ms |         |
| 11 |           Seq Scan on public.foo foo_2 |          107.8 ms |            1 |   107.8 ms |  107.8 ms |         |
| 12 |         Aggregate                      |          199.8 ms |            1 |   199.8 ms |   92.1 ms |         |
| 13 |           Seq Scan on public.foo foo_3 |          107.7 ms |            1 |   107.7 ms |  107.7 ms |         |
| 14 |         Aggregate                      |          206.3 ms |            1 |   206.3 ms |   95.2 ms |         |
| 15 |           Seq Scan on public.foo foo_4 |          111.1 ms |            1 |   111.1 ms |  111.1 ms |         |
'-------------------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching ParallelAppendCount 1`] = `
".---------------------------------------------------------------------------------------------------------------------.
|                                                 ParallelAppendCount                                                 |
|---------------------------------------------------------------------------------------------------------------------|
| #  |                  Label                   | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|------------------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Query                                    |                   |              |   678.7 ms |      0 μs |       x |
|  2 |   Planning                               |                   |              |     227 μs |    227 μs |       x |
|  3 |   Execution                              |                   |              |   678.5 ms |  -13.0 ms |       x |
|  4 |     Nested Loop                          |          675.1 ms |            1 |   691.5 ms |      0 μs |         |
|  5 |       Nested Loop                        |          675.0 ms |            1 |   691.5 ms |      0 μs |         |
|  6 |         Gather                           |          210.8 ms |            1 |   223.9 ms |      0 μs |         |
|  7 |           Parallel Append                |          144.8 ms |            3 |   223.9 ms |      0 μs |         |
|  8 |             Aggregate                    |          223.9 ms |            1 |   223.9 ms |   95.9 ms |         |
|  9 |               Seq Scan on foo            |          128.0 ms |            1 |   128.0 ms |  128.0 ms |         |
| 10 |             Aggregate                    |          210.6 ms |            1 |   210.6 ms |   96.7 ms |         |
| 11 |               Seq Scan on foo foo_1      |          113.9 ms |            1 |   113.9 ms |  113.9 ms |         |
| 12 |         Gather                           |          233.8 ms |            2 |   467.6 ms |   16.1 ms |         |
| 13 |           Parallel Append                |          145.3 ms |            6 |   451.5 ms |      0 μs |         |
| 14 |             Aggregate                    |          225.7 ms |            2 |   451.5 ms |  193.3 ms |         |
| 15 |               Seq Scan on foo foo_2      |          129.1 ms |            2 |   258.1 ms |  258.1 ms |         |
| 16 |             Aggregate                    |          210.0 ms |            2 |   420.1 ms |  193.3 ms |         |
| 17 |               Seq Scan on foo foo_3      |          113.4 ms |            2 |   226.8 ms |  226.8 ms |         |
| 18 |       Function Scan on generate_series a |              4 μs |            4 |      16 μs |     16 μs |         |
'---------------------------------------------------------------------------------------------------------------------'

.----------------------------------------------------------------------------------------------.
| # |                                         Warning                                          |
|---|------------------------------------------------------------------------------------------|
| 3 | The children of this node have a cumulative total time exceeding this node's total time. |
'----------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching ParallelCount 1`] = `
".--------------------------------------------------------------------------------------------------------------.
|                                                ParallelCount                                                 |
|--------------------------------------------------------------------------------------------------------------|
| # |               Label                | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|---|------------------------------------|-------------------|--------------|------------|-----------|---------|
| 1 | Query                              |                   |              |   851.0 ms |      0 μs |       x |
| 2 |   Planning                         |                   |              |      54 μs |     54 μs |       x |
| 3 |   Execution                        |                   |              |   851.0 ms |     57 μs |       x |
| 4 |     Finalize Aggregate             |          834.7 ms |            1 |   850.9 ms |      0 μs |         |
| 5 |       Gather                       |          850.9 ms |            1 |   850.9 ms |   20.3 ms |         |
| 6 |         Partial Aggregate          |          830.6 ms |            3 |   830.6 ms |  357.2 ms |         |
| 7 |           Parallel Seq Scan on foo |          473.4 ms |            3 |   473.4 ms |  473.4 ms |         |
'--------------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching ParallelCountAppend 1`] = `
".---------------------------------------------------------------------------------------------------------------------------.
|                                                    ParallelCountAppend                                                    |
|---------------------------------------------------------------------------------------------------------------------------|
| #  |                     Label                      | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|------------------------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Query                                          |                   |              |   500.8 ms |      0 μs |       x |
|  2 |   Planning                                     |                   |              |     265 μs |    265 μs |       x |
|  3 |   Execution                                    |                   |              |   500.5 ms |    193 μs |       x |
|  4 |     Nested Loop                                |          497.5 ms |            1 |   500.3 ms |      0 μs |         |
|  5 |       Nested Loop                              |          497.5 ms |            1 |   500.3 ms |      0 μs |         |
|  6 |         Append                                 |          170.6 ms |            1 |   170.6 ms |      0 μs |         |
|  7 |           Finalize Aggregate                   |           89.9 ms |            1 |    89.9 ms |      0 μs |         |
|  8 |             Gather                             |           89.9 ms |            1 |    89.9 ms |    4.1 ms |         |
|  9 |               Partial Aggregate                |           85.9 ms |            3 |    85.9 ms |   36.6 ms |         |
| 10 |                 Parallel Seq Scan on foo       |           49.3 ms |            3 |    49.3 ms |   49.3 ms |         |
| 11 |           Finalize Aggregate                   |           80.7 ms |            1 |    80.7 ms |      0 μs |         |
| 12 |             Gather                             |           80.7 ms |            1 |    80.7 ms |    3.5 ms |         |
| 13 |               Partial Aggregate                |           77.2 ms |            3 |    77.2 ms |   33.2 ms |         |
| 14 |                 Parallel Seq Scan on foo foo_1 |           43.9 ms |            3 |    43.9 ms |   43.9 ms |         |
| 15 |         Append                                 |          163.4 ms |            2 |   329.7 ms |      0 μs |         |
| 16 |           Finalize Aggregate                   |           80.4 ms |            2 |   160.9 ms |      0 μs |         |
| 17 |             Gather                             |           80.4 ms |            2 |   160.9 ms |    7.3 ms |         |
| 18 |               Partial Aggregate                |           76.8 ms |            6 |   153.6 ms |   66.2 ms |         |
| 19 |                 Parallel Seq Scan on foo foo_2 |           43.7 ms |            6 |    87.4 ms |   87.4 ms |         |
| 20 |           Finalize Aggregate                   |           83.0 ms |            2 |   168.9 ms |      0 μs |         |
| 21 |             Gather                             |           84.4 ms |            2 |   168.9 ms |   10.0 ms |         |
| 22 |               Partial Aggregate                |           79.4 ms |            6 |   158.9 ms |   68.2 ms |         |
| 23 |                 Parallel Seq Scan on foo foo_3 |           45.3 ms |            6 |    90.7 ms |   90.7 ms |         |
| 24 |       Function Scan on generate_series a       |              3 μs |            4 |      12 μs |     12 μs |         |
'---------------------------------------------------------------------------------------------------------------------------'"
`;

exports[`transformQueries time accounting snapshots are matching RewriteTwoQueries 1`] = `
".---------------------------------------------------------------------------------------------------------------------.
|                                                  RewriteTwoQueries                                                  |
|---------------------------------------------------------------------------------------------------------------------|
| #  |                  Label                   | Actual Total Time | Actual Loops | Total Time | Self Time | Virtual |
|----|------------------------------------------|-------------------|--------------|------------|-----------|---------|
|  1 | Queries                                  |                   |              |   259.0 ms |      0 μs |       x |
|  2 |   Query 1                                |                   |              |   130.2 ms |      0 μs |       x |
|  3 |     Planning                             |                   |              |      42 μs |     42 μs |       x |
|  4 |     Execution                            |                   |              |   130.1 ms |    1.3 ms |       x |
|  5 |       Insert on foo                      |          128.8 ms |            1 |   128.8 ms |  105.3 ms |         |
|  6 |         Function Scan on generate_series |           23.5 ms |            1 |    23.5 ms |   23.5 ms |         |
|  7 |   Query 2                                |                   |              |   128.8 ms |      0 μs |       x |
|  8 |     Planning                             |                   |              |      41 μs |     41 μs |       x |
|  9 |     Execution                            |                   |              |   128.8 ms |    1.4 ms |       x |
| 10 |       Insert on bar                      |          127.4 ms |            1 |   127.4 ms |  105.3 ms |         |
| 11 |         Function Scan on generate_series |           22.0 ms |            1 |    22.0 ms |   22.0 ms |         |
'---------------------------------------------------------------------------------------------------------------------'"
`;
